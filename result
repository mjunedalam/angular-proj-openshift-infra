export const wellDataStore = signalStore(
    { providedIn: 'root' },
    withState<WellDataState>({ response: null }),
    withMethods(
        (
            store,
            service = inject(WwellDataService),
            loading = inject(LoadingService)
        ) => ({
            // Updated to accept the parameter
            loadWellData: (epNum: string) => {
                loading.show();
                patchState(store, { response: null });

                service.getWellDataByEPANum(epNum).subscribe({
                    next: (res) => {
                        console.log("Well data loaded:", res);
                        patchState(store, { response: res });
                    },
                    error: (err) => {
                        patchState(store, {
                            response: {
                                statusCode: err.status || 500,
                                error: true,
                                message: err.message,
                                data: null as any, // Adjusted to match your IWellData type
                            },
                        });
                    },
                    complete: () => loading.hide()
                });
            },

            // If refresh needs the same epNum, you might want to store epNum in state 
            // or pass it here as well.
            refresh: (epNum: string) => {
                loading.show();
                service.getWellDataByEPANum(epNum).subscribe({
                    next: (res) => patchState(store, { response: res }),
                    error: (err) => patchState(store, { /* handle error */ }),
                    complete: () => loading.hide(),
                });
            },
        })
    )
);
// wwell-data.service.ts
getWellDataByEPANum(epNum: string): Observable<ApiResponse<IWellData>> {
  // This sends: /drilling-eye?epNum=your_value
  return this.http.get<ApiResponse<IWellData>>(`${this.apiUrl}/drilling-eye`, {
    params: { epNum }
  });
}
