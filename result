<header class="bg-white h-14 flex items-center justify-between px-4 shadow-sm shrink-0 z-10 relative border-b border-slate-200 mb-5">
  <div class="flex items-center gap-4">
    <div class="h-6 w-px bg-slate-300 hidden sm:block"></div>
    <button 
      mat-stroked-button 
      color="primary" 
      class="text-[10px] !h-8 !px-3"
      (click)="store.toggleShowAll()">
      {{ store.showAll() ? 'Back to Slider' : 'View All Wells' }}
    </button>
  </div>

  <div class="flex items-center flex-1 justify-center overflow-hidden">
    <mat-chip-listbox 
      aria-label="Well Name Chips" 
      class="transition-all"
      [class.overflow-x-auto]="store.showAll()"
    >
      <div class="flex items-center gap-2" [class.flex-wrap]="store.showAll()">
        
        @if (!store.showAll()) {
          <button
            mat-icon-button
            class="scale-90"
            (click)="store.navigatePrev()"
            [disabled]="store.selectedWellId() === store.wells()[0]?.epANum"
          >
            <mat-icon>keyboard_arrow_left</mat-icon>
          </button>
        }

        @for (well of visibleWells(); track well.epANum) {
          <mat-chip-option
            [selected]="well.epANum === selectedWellId()"
            (click)="onWellSelect(well)"
            class="transition-all"
          >
            <span class="text-xs font-bold">{{ well.wGnrName }}</span>
          </mat-chip-option>
        }

        @if (!store.showAll()) {
          <button
            mat-icon-button
            class="scale-90"
            (click)="store.navigateNext()"
            [disabled]="store.selectedWellId() === store.wells()[store.wells().length - 1]?.epANum"
          >
            <mat-icon>keyboard_arrow_right</mat-icon>
          </button>
        }
      </div>
    </mat-chip-listbox>
  </div>

  <div class="flex items-center gap-4 text-xs ml-4">
    <div class="hidden lg:flex items-center gap-2 text-slate-500 font-medium">
      <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded border border-blue-100">
        {{ chipCountInfo() }}
      </span>
      <i class="fa-regular fa-calendar text-blue-600 ml-2"></i>
      <span>Mon, 20 Oct 2025</span>
    </div>
  </div>
</header>

:host {
  display: block;
}

mat-chip-listbox {
  &.overflow-x-auto {
    max-width: 60vw; // Prevents the header from stretching too wide
    padding: 4px 0;
  }
}

.mat-mdc-chip-option {
  transition: transform 0.2s ease;
  &.mat-mdc-chip-selected {
    background-color: #1e40af !important; // Deep blue
    .mdc-chip__text-label {
      color: white !important;
    }
  }
}

// Ensure icons don't shrink
.mat-icon-button {
  flex-shrink: 0;
}
