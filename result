// misc-pres-well-data.component.ts
export class MiscPresWellDataComponent {
  private readonly reportStore = inject(MorningReportStore);
  private readonly wellDataStore = inject(wellDataStore);

  readonly selectedWellData = computed(() => {
    const activeId = this.reportStore.selectedWellId(); // Dependency 1
    const allData = this.wellDataStore.response()?.data; // Dependency 2

    console.log('Step 2: Misc Component - Computed logic re-running...');
    console.log('Current Selected ID from Store:', activeId);

    if (!allData || !activeId) {
      console.warn('Step 3: Data flow incomplete - Missing Data or ID');
      return null;
    }

    const found = allData.find(item => {
      const wellId = item.DRLG_OP_STATUS?.[0]?.epANum;
      return String(wellId) === String(activeId);
    });

    if (found) {
      console.log('Step 3: Success! Matching data found for well:', found.WELL_NAME);
    } else {
      console.error('Step 3: Failure - No matching data in array for ID:', activeId);
    }

    return found ?? null;
  });
}
